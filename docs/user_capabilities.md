# Recallアプリでできることとアクションの結果

このドキュメントは、Recallアプリでユーザーが取れる主なアクションと、その結果どのような体験が得られるのかを整理したものです。プロトタイプの仕様書（`docs/features/*.md`）を基にまとめています。

## 1. 利用開始とアカウント管理
- **Googleアカウントでワンタップログイン**すると、Firebase Authがセッションを管理し続けてくれるため、再ログインの手間がほぼ不要になります。
- **プロフィールや表示名を編集**すると、アプリ全体で即座に反映され、提案やチャットでも更新後の情報が使われます。
- **アカウント削除を実行**すると、確認ダイアログの後に全データが消去され、ログインできなくなります。

## 2. つながりをつくる／見つける
- **フレンド申請を送る**と、相手にプッシュ通知が届き、承認されると両者がフレンド一覧に表示されるようになります。
- **SNS連携から友だち候補をインポート**すると、同じSNSを連携済みの既存ユーザーが「知り合いかも？」に並び、そこからワンタップで連絡先追加ができます。
- **顔認識のオプトインを有効化して基準写真を登録**すると、共有した写真からフレンド候補を自動で提案できるようになります。オプトアウトすると照合対象から除外されます。

## 3. 提案を作成する
- **手動で提案を作成**すると、タイトル・場所・日時候補をカスタマイズした匿名提案が対象メンバーに送られ、一覧の「送信済み」タブで進捗を確認できます。
- **AI提案の通知で「送信する」をタップ**すると、ジャーナルの写真をもとに生成された提案が即座に送信され、相手には通常の提案として届きます。
- **写真共有からテーマサジェストを受け取る**と、画像の内容に合わせた遊びプランが候補として表示され、そのまま提案作成画面に適用できます。

## 4. 提案にリアクションする
- **提案詳細で「いいね」を選ぶ**と自分の承諾が記録され、全員がいいねすると提案ステータスが自動的に`agreed`へ遷移します。
- **「今回はやめる」を選ぶ**と、瞬時に提案が`rejected`となり、参加者全員へ不成立の通知が届きます。
- **締切まで未回答のまま放置**すると、期限切れで`rejected`になり、提案は一覧からクローズされます。

## 5. グループチャットとBot
- **全員一致で合意が成立**すると、提案タイトルを名前に持つグループが自動生成され、Botから「合意が成立しました！」という最初のメッセージが届きます。
- **グループに参加してメッセージを送る**と、メンバー全員にリアルタイムで表示され、必要に応じてプッシュ通知も送られます（送信者本人は除外）。

## 6. 日程調整
- **Botが提示する日時候補に投票**すると、自分のステータス（OK/NG）が即時反映され、他メンバーのカレンダー空き状況と合わせて見られます。
- **全員が同じ候補にOKを出す**とその日時が自動確定し、チャットに結果が投稿され、予定前日にはリマインダー通知が届きます。
- **投票が揃っても決まらない場合**は、BotがOK票の多い候補を選び、決定通知を送ります。

## 7. ジャーナルと写真活用
- **思い出ジャーナルに写真とメモを投稿**するとプライベートなタイムラインが増え、写っている友人が自動タグ候補として表示されます。
- **「また集まろう」ボタンを押す**と、その思い出に写るメンバー向けの再会提案がワンタップで生成されます。
- **特定の日に過去の思い出がある場合**は、該当日に合わせてプッシュ通知でリマインドされます。

## 8. 通知で把握する
- **通知をONにしておく**と、新規提案・リアクション・チャットの新着・日程確定・予定前日リマインダーなどのイベントをアプリ外でも受け取れます。
- **通知種別ごとにOFFに切り替える**と、該当イベントのプッシュが止まり、アプリ内バッジや一覧だけで進捗を追う形になります。

## 9. 安全性とプライバシー
- **ユーザーをブロック**すると、その相手は自分を一切検知できなくなり、相手からの提案・メッセージはサーバー側で破棄されます（相手には成功表示）。
- **通報を送る**と運営レビューに回り、必要に応じて警告や利用停止などが実施されます。
- **ブロック一覧を確認・解除**すると、再び相互のやりとりが可能になります。

## 10. 設定とカスタマイズ
- **テーマを変更**すると、ライト／ダーク／システム連動の外観が即座に切り替わります。
- **アプリの表示言語を切り替える**と、全画面の文言が選択した言語に更新されます。
- **通知・プライバシー・連携SNSなどをまとめて管理**でき、設定した内容はサーバーに保存されるため、他端末でも引き継がれます。

---

これらの機能が連携することで、「久しく連絡を取っていない知人との再接触」を提案づくりから日程確定まで一気通貫でサポートします。
