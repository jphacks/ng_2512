# Recall Production Deployment (.env template)
# Copy this file to deploy/.env on the server or CI runner and replace the placeholder values.

# --- Container image metadata ---
IMAGE_REPO=ghcr.io/your-org/recall/api
# Prefer immutable sha-* tags for safe rollbacks (e.g. sha-0123456789abcdef)
IMAGE_TAG=sha-yourcommit

# --- Compose / infra knobs ---
# Enable services beyond the API by listing profile names (comma-separated), e.g. "postgres,redis,vllm"
COMPOSE_PROFILES=postgres,redis,vllm
# Publicly exposed ports
HOST_PORT=8000
REDIS_EXPOSE_PORT=6379
VLLM_EXPOSE_PORT=8008

# --- Deployment automation ---
HEALTHCHECK_URL=http://127.0.0.1:8000/readyz
HEALTHCHECK_TIMEOUT=90
MIGRATION_COMMAND=flask db upgrade
# Optionally override when using private GHCR images
GHCR_USERNAME=
GHCR_TOKEN=

# --- Backend runtime env ---
FLASK_APP=backend.app:create_app
FLASK_ENV=production
LOG_LEVEL=INFO
SECRET_KEY=change-me-in-production
DATABASE_URL=postgresql+psycopg2://recall:recall@db:5432/recall
REDIS_URL=redis://redis:6379/0
VLLM_ENDPOINT=http://vllm:8008

# --- Database bootstrap (only used when profiles include postgres) ---
POSTGRES_USER=recall
POSTGRES_PASSWORD=recall
POSTGRES_DB=recall

# --- Observability / integrations (optional) ---
SENTRY_DSN=
OTLP_ENDPOINT=
PRIMARY_DOMAIN=recall.example.com
